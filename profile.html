<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinSet UI Replica</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-body: #F2F0F9;
            --text-dark: #1D1D35;
            --text-grey: #9A9AB0;
            --primary-purple: #9474FF;
            --primary-gradient: linear-gradient(135deg, #9C72FD 0%, #7450FE 100%);
            --header-purple: #7450FE;
            --shadow-soft: 0 10px 25px rgba(166, 171, 189, 0.3);
            --shadow-glow: 0 10px 25px rgba(116, 80, 254, 0.4);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        body { background-color: var(--bg-body); color: var(--text-dark); overflow-x: hidden; }

        /* --- SIDEBAR MENU --- */
        #sidebar {
            position: fixed; top: 15px; left: -280px; width: 260px; height: calc(100% - 30px);
            background: white; border-radius: 25px; z-index: 2000; padding: 30px 20px;
            box-shadow: 10px 0 40px rgba(0,0,0,0.1); transition: all 0.4s ease;
            display: flex; flex-direction: column;
        }
        #sidebar.active { left: 15px; }
        .sidebar-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.2); backdrop-filter: blur(4px);
            display: none; z-index: 1500;
        }
        .sidebar-overlay.active { display: block; }
        
        .sidebar-logo { display: flex; align-items: center; gap: 12px; margin-bottom: 40px; }
        .logo-circle { width: 40px; height: 40px; background: black; border-radius: 50%; display: flex; justify-content: center; align-items: center; color: var(--primary-purple); font-size: 20px; }
        
        .nav-items { flex-grow: 1; } /* Yeh navigation links ko upar rakhega */

        .nav-link { display: flex; align-items: center; padding: 12px 15px; border-radius: 30px; color: var(--text-dark); text-decoration: none; font-weight: 500; font-size: 15px; gap: 15px; cursor: pointer; margin-bottom: 5px; }
        .nav-link.active { background: var(--primary-purple); color: white; box-shadow: 0 8px 15px rgba(148, 116, 255, 0.3); }

        /* --- THEME TOGGLE (Fixed at Bottom) --- */
        .theme-toggle-box { 
            background: #F2F0F9; 
            border-radius: 25px; 
            padding: 5px; 
            display: flex; 
            width: fit-content; 
            margin: 20px auto 0 auto; /* Sidebar ke bottom mein center karega */
        }
        .theme-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: 0.3s; }
        .theme-icon.active { background: var(--primary-purple); color: white; }

        /* --- PAGE BASICS --- */
        .page { display: none; width: 100%; max-width: 500px; margin: 0 auto; min-height: 100vh; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* --- SHARED LIST STYLES --- */
        .list-item { background: white; border-radius: 20px; padding: 15px; margin-bottom: 15px; display: flex; align-items: center; box-shadow: var(--shadow-soft); cursor: pointer; }
        .icon-box { width: 50px; height: 50px; border-radius: 15px; display: flex; justify-content: center; align-items: center; color: white; margin-right: 15px; font-size: 20px; }

        /* --- THEME HEADER --- */
        .theme-header { background: var(--header-purple); padding: 50px 25px 100px 25px; color: white; }
        .toggle-container { background: rgba(255,255,255,0.2); border-radius: 30px; padding: 5px; display: flex; margin-top: 20px; }
        .toggle-btn { flex: 1; text-align: center; padding: 10px; border-radius: 25px; font-size: 14px; cursor: pointer; }
        .toggle-btn.active { background: white; color: #F560C6; font-weight: 600; }
        .content-overlap { margin-top: -60px; padding: 0 25px 25px 25px; }
        .storage-card { background: white; border-radius: 25px; padding: 25px; box-shadow: var(--shadow-soft); margin-bottom: 25px; }

        .url-box { display: flex; align-items: center; gap: 12px; background: #F2F0F9; border-radius: 15px; padding: 14px 16px; margin-top: 15px; font-size: 14px; font-weight: 500; }
        .url-box i { color: #7450FE; font-size: 15px; }
        .url-box span { flex: 1; color: #1D1D35; word-break: break-all; }
        .copy-btn { cursor: pointer; }

        /* --- PROFILE PAGE --- */
        .p-content { padding: 25px; }
        .promo-card { background: var(--primary-gradient); border-radius: 25px; padding: 25px; color: white; display: flex; align-items: center; margin-bottom: 30px; box-shadow: var(--shadow-glow); }
        .categories { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 30px; }
        .cat-item { background: white; border-radius: 20px; padding: 20px 10px; text-align: center; box-shadow: var(--shadow-soft); }
        .cat-icon { width: 50px; height: 50px; margin: 0 auto 10px; border-radius: 15px; display: flex; justify-content: center; align-items: center; color: white; font-size: 22px; }
.chatid-popup {
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.7);
    z-index:5000;
    display:flex;
    justify-content:center;
    align-items:center;
}

.chatid-card {
    background:white;
    width:90%;
    max-width:350px;
    padding:25px;
    border-radius:25px;
    text-align:center;
    animation: scaleIn 0.3s ease;
}

@keyframes scaleIn {
    from {transform:scale(0.8); opacity:0;}
    to {transform:scale(1); opacity:1;}
}

.chatid-card input {
    width:100%;
    padding:12px;
    border-radius:15px;
    border:1px solid #ddd;
    margin:15px 0;
    font-size:14px;
}

.chatid-card button {
    background:#7450FE;
    color:white;
    border:none;
    padding:10px 20px;
    border-radius:20px;
    cursor:pointer;
    font-weight:600;
}

.close-btn {
    margin-top:15px;
    background:#eee;
    color:#333;
}

.chatid-display {
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:#F2F0F9;
    padding:10px 15px;
    border-radius:15px;
    margin-top:10px;
}

.chatid-display i {
    cursor:pointer;
    color:#7450FE;
}

.success-box {
    display:none;
    margin-top:20px;
    position:relative;
    height:120px;
}

.paper {
    width:60px;
    height:80px;
    background:#7450FE;
    margin:0 auto;
    border-radius:5px;
    animation: fall 1s ease forwards;
}

@keyframes fall {
    from {transform:translateY(-100px) rotate(0deg); opacity:0;}
    to {transform:translateY(0) rotate(10deg); opacity:1;}
}
.chatid-popup {
    display: none;   /* üî¥ ye mandatory hai */
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 5000;
    justify-content: center;
    align-items: center;
}
/* Telegram Profile Popup Styles */
.tg-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    z-index: 6000;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

.tg-card {
    background: #F2F0F9;
    width: 100%;
    max-width: 400px;
    border-radius: 25px;
    overflow: hidden;
    position: relative;
    animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.tg-header {
    background: #6B93C1; /* Screenshot matching blue */
    padding: 40px 20px 25px;
    text-align: center;
    color: white;
}

.tg-header-icons {
    display: flex;
    justify-content: space-between;
    position: absolute;
    top: 15px;
    left: 20px;
    right: 20px;
}

.tg-avatar-large {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.2);
    margin-bottom: 12px;
    object-fit: cover;
}

.tg-online-tag {
    background: rgba(0, 0, 0, 0.1);
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 12px;
}

.tg-body {
    background: white;
    padding: 20px;
}

.tg-channel-row {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
}

.tg-info-section {
    border-top: 1px solid #f0f0f0;
    padding-top: 15px;
}

.tg-link-text {
    color: #4A90E2;
    font-size: 14px;
    line-height: 1.8;
    word-break: break-all;
}

.tg-back-btn {
    width: 100%;
    padding: 16px;
    border: none;
    background: #7450FE;
    color: white;
    font-weight: 700;
    cursor: pointer;
    font-size: 16px;
}

@keyframes slideUp {
    from { transform: translateY(100px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
/* --- BOT POPUP OVERLAY --- */
.bot-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.85);
    z-index: 7000;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

/* --- BOT DATA CARD --- */
.bot-card {
    background: white;
    width: 100%;
    max-width: 380px;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 15px 35px rgba(0,0,0,0.5);
    animation: botFadeUp 0.4s ease;
}

/* --- BOT DATA HEADER --- */
.bot-data-header {
    padding: 15px;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f9f9f9;
}

.bot-data-title {
    font-weight: 700;
    font-size: 16px;
    color: #1D1D35;
    letter-spacing: 1px;
}

/* --- BOT DATA BODY --- */
.bot-data-body {
    padding: 20px;
    font-family: 'Courier New', Courier, monospace; /* For technical look */
}

.data-line {
    margin-bottom: 12px;
    font-size: 13px;
    color: #333;
    display: flex;
    align-items: flex-start;
}

.data-label {
    font-weight: 700;
    min-width: 110px;
    color: #000;
}

.data-value {
    color: #4A90E2;
    word-break: break-all;
}

/* --- BOT FOOTER --- */
.bot-footer {
    padding: 15px;
    text-align: center;
    border-top: 1px solid #eee;
}

.bot-back-btn {
    background: #7450FE;
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 25px;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
}

@keyframes botFadeUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

 </style>
</head>

<body>

    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
    
    <div id="sidebar">
        <div class="sidebar-logo">
            <div class="logo-circle"><i class="fa-solid fa-f"></i></div>
            <div class="logo-text" style="font-weight: 700; font-size: 20px; margin-left: 10px;">WELCOME</div>
        </div>
        
        <div class="nav-items">
            <div class="nav-link active" id="nav-themes" onclick="switchPage('themes')">
                <i class="fa-solid fa-house"></i> Dashboard
            </div>
            <div class="nav-link" id="nav-profile" onclick="switchPage('profile')">
                <i class="fa-solid fa-user"></i> PROFILE 
            </div>
            <div class="nav-link"><i class="fa-brands fa-telegram"></i>TG CHANNEL</div>
            <div class="nav-link"><i class="fa-solid fa-user-group"></i>MEMBERS</div>
            <div class="nav-link"><i class="fa-solid fa-bolt"></i>VIP FUTURE</div>
            <div class="nav-link"><i class="fa-solid fa-envelope"></i>FEEDBACK</div>
            <div class="nav-link" onclick="logoutUser()">
                <i class="fa-solid fa-door-open"></i>LOGOUT
            </div>
        </div>

        <div class="theme-toggle-box">
            <div class="theme-icon active" title="Light Mode"><i class="fa-solid fa-sun"></i></div>
            <div class="theme-icon" title="Dark Mode"><i class="fa-regular fa-moon"></i></div>
        </div>
    </div>

    <div id="page-themes" class="page active">
        <div class="theme-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <i class="fa-solid fa-ellipsis-vertical" onclick="toggleSidebar()" style="cursor: pointer; font-size: 20px;"></i>
                <div style="font-weight: 600; font-size: 18px;">DASHBOARD</div>
                <div style="width: 20px;"></div>              
            </div>
            <div class="toggle-container">
                <div class="toggle-btn active">„äô FLOW WEB</div>
            </div>                                
        </div>
        <div class="content-overlap">
            <div class="storage-card">
                <div style="font-weight: 600; font-size: 14px;">üåê WEB URL</div>
                <div class="url-box">
                    <i class="fa-solid fa-link"></i>
                    <span id="webUrl">https://flowweb.app</span>
                    <i class="fa-regular fa-copy copy-btn" onclick="copyWebUrl()"></i>
                </div>
            </div>
            <div class="list-item"><div class="icon-box" style="background: #36C3D8;"><i class="fa-solid fa-brush"></i></div><div style="flex:1"><b>THEMES & DEMOS</b></div><i class="fa-solid fa-chevron-right" style="color:#DDD"></i></div>
            <div class="list-item" onclick="openThemesPopup()"><div class="icon-box" style="background: #36C3D8;"><i class="fa-regular fa-image"></i></div><div style="flex:1"><b>THEMES GALLERY</b></div><i class="fa-solid fa-chevron-right" style="color:#DDD"></i></div>
            <div class="list-item"><div class="icon-box" style="background: #36C3D8;"><i class="fa-solid fa-chart-line"></i></div><div style="flex:1"><b>RESULTS</b></div><i class="fa-solid fa-chevron-right" style="color:#DDD"></i></div>
        </div>
    </div>

    <div id="page-profile" class="page">
        <div class="p-content">
            <div style="margin-bottom: 25px;">
                <i class="fa-solid fa-ellipsis-vertical" onclick="toggleSidebar()" style="cursor: pointer; font-size: 20px;"></i>
            </div>
            
            <div class="promo-card">
                <div style="width:80px; height:80px; border-radius:50%; overflow:hidden; margin-right:20px; border:3px solid white; flex-shrink:0;">
                    <img src="https://uploads.onecompiler.io/4472wkpre/44agbuxg7/eef745c62d8f0e13d0933246fca04631.jpg" alt="Avatar" style="width:100%; height:100%; object-fit:cover;">
                </div>
                <div>
                    <small id="userEmail">Loading...</small>
                    <div id="userName" style="font-size:24px; font-weight:700;">Loading...</div>
                    <small style="opacity: 0.8;">HOPE IS USELESS</small><br>
                    <button style="background: #000; border:none; padding: 6px 15px; border-radius: 20px; color:white; font-size:12px; font-weight:600; margin-top:8px;">„äù MEMBER</button>
                </div>
            </div>

            <h3 style="margin-bottom: 15px; font-size: 16px;">TELEGRAM SETTINGS</h3>
            <div class="categories">
                <div class="cat-item" onclick="handleBotRedirect()">
    <div class="cat-icon" style="background:#000;">
        <i class="fa-solid fa-robot"></i>
    </div>
    <small>ùôèùôÇ ùòΩùôäùôè</small>
</div>

<div id="bot-data-popup" class="bot-overlay">
    <div class="bot-card">
        <div class="bot-data-header">
            <span class="bot-data-title">‚îå‚îÄ‚îÄ‚îÄ‚îÄ DATA COME #1 ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span>
            <i class="fa-solid fa-xmark" onclick="closeBotPopup()" style="cursor:pointer; color:#999;"></i>
        </div>

        <div class="bot-data-body">
            <div class="data-line">
                <span class="data-label">L‚îÄ‚û§ Time:</span>
                <span class="data-value">04:30 PM Saturday 06/12/2025</span>
            </div>
            <div class="data-line">
                <span class="data-label">L‚îÄ‚û§ Player ID:</span>
                <span class="data-value">1234567890</span>
            </div>
            <div class="data-line">
                <span class="data-label">L‚îÄ‚û§ Email:</span>
                <span class="data-value">example@gmail.com</span>
            </div>
            <div class="data-line">
                <span class="data-label">L‚îÄ‚û§ Password:</span>
                <span class="data-value">1234567890</span>
            </div>
            <div class="data-line">
                <span class="data-label">L‚îÄ‚û§ Platform:</span>
                <span class="data-value">Facebook</span>
            </div>
            <div class="data-line">
                <span class="data-label">L‚îÄ‚û§ IP:</span>
                <span class="data-value">106.220.72.142</span>
            </div>
            <div class="data-line" style="margin-top:15px; border-top: 1px dashed #ccc; padding-top:10px; justify-content: center;">
                <span style="font-size:10px; color:#999;">¬© FLOW WEB</span>
            </div>
        </div>

        <div class="bot-footer">
            <button class="bot-back-btn" onclick="closeBotPopup()">BACK TO DASHBOARD</button>
        </div>
    </div>
</div>

                <div class="cat-item" onclick="openOwnerTelegram()">
    <div class="cat-icon" style="background:#000;">
        <i class="fa-solid fa-crown"></i>
    </div>
    <small>ùôäùôíùôâùôÄùôç</small>
</div>

<div id="tg-profile-popup" class="tg-overlay">
    <div class="tg-card">
        <div class="tg-header">
            <div class="tg-header-icons">
                <i class="fa-solid fa-arrow-left" onclick="closeTgPopup()"></i>
                <i class="fa-solid fa-ellipsis-vertical"></i>
            </div>
            <img src="https://uploads.onecompiler.io/4472wkpre/44ajetact/IMG_20251103_093026_328.jpg" class="tg-avatar-large">
            <h2 style="font-weight: 600;">‚ÄîFLOW OWNER Ô∑Ω</h2>
            <span class="tg-online-tag"><i class="fa-solid fa-shield"></i> online</span>
        </div>

        <div class="tg-body">
            <div class="tg-channel-row">
                <img src="https://uploads.onecompiler.io/4472wkpre/44ajetact/IMG_20251103_093026_328.jpg" style="width:45px; height:45px; border-radius:50%;">
                <div>
                    <div style="font-weight:700;">FLOWxBIO <span style="color:#4A90E2; font-size:12px; font-weight:400;">17 subscribers</span></div>
                    <div style="font-size:12px; color:#666;">‚úÖ CHANNELS UNDER ME ‚úÖ</div>
                </div>
                <i class="fa-solid fa-check" style="margin-left:auto; color:#4CAF50;"></i>
            </div>

            <div class="tg-info-section">
                <p style="color:#7450FE; font-weight:600; font-size:13px; margin-bottom:5px;">Info</p>
                <div class="tg-link-text">
                    @FLOWxPROOF ! @FLOWxDATA ! @FLOWxBIO ! @FLOWxQR ! @FLOWESCROWSERVICE
                </div>
                <div style="margin-top:15px;">
                    <p style="color:#999; font-size:12px; margin:0;">Username</p>
                    <p style="font-weight:600; margin:0;">@FLOW_HERE</p>
                </div>
            </div>
        </div>

        <button class="tg-back-btn" onclick="closeTgPopup()">BACK TO HOME</button>
    </div>
</div>

                <div class="cat-item" onclick="openChatIdPopup()">
    <div class="cat-icon" style="background:#000;">
        <i class="fa-solid fa-comment"></i>
    </div>
    <small>ùòæùôÉùòºùôè ùôÑùòø</small>
</div>
            </div>

            <h3 style="margin-bottom: 15px; font-size: 16px;">SETTINGS</h3>
            <div class="list-item"><div class="icon-box" style="background: #FFF4D9; color: #FFC107;"><i class="fa-solid fa-sliders"></i></div><div style="flex:1"><b>ACCOUNT SETTING</b></div><i class="fa-solid fa-ellipsis-vertical" style="color:#AAA"></i></div>
            <div class="list-item"><div class="icon-box" style="background: #FFF4D9; color: #FFC107;"><i class="fa-solid fa-user-gear"></i></div><div style="flex:1"><b>PROFILE SETTING</b></div><i class="fa-solid fa-ellipsis-vertical" style="color:#AAA"></i></div>
        </div>
    </div>

    <div id="themes-popup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:3000; overflow-y:auto; padding:30px;">
        <div style="display:flex; justify-content:flex-end;"><button onclick="closeThemesPopup()" style="background:#7450FE; color:white; border:none; padding:10px 20px; border-radius:20px; cursor:pointer;">CLOSE</button></div>
        <h2 style="color:white; text-align:center; margin:20px 0;">Themes Gallery</h2>
        <div id="themes-buttons" style="display:grid; grid-template-columns:1fr 1fr; gap:15px; max-width:500px; margin:0 auto;"></div>
    </div>

    <div id="theme-fullscreen" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:4000; flex-direction:column; justify-content:center; align-items:center; padding:30px;">
        <button onclick="closeFullTheme()" style="position:absolute; top:30px; right:30px; background:#7450FE; color:white; border:none; padding:10px 20px; border-radius:20px; cursor:pointer;">CLOSE</button>
        <img id="full-theme-image" src="" style="max-width:90%; max-height:85%; border-radius:20px; border:2px solid #7450FE;">
    </div>
<div id="chatid-popup" class="chatid-popup">
    <div class="chatid-card">
        <h3>üîó Telegram Chat ID</h3>

        <div id="chatid-view" style="display:none;">
            <p>Your Chat ID</p>
            <div class="chatid-display">
                <span id="savedChatId">---</span>
                <i class="fa-solid fa-pen-to-square" onclick="editChatId()"></i>
            </div>
        </div>

        <div id="chatid-form">
            <input type="text" id="chatIdInput" placeholder="Enter Telegram Chat ID">
            <button onclick="saveChatId()">CONNECT</button>
        </div>

        <div id="chatid-success" class="success-box">
            <div class="paper"></div>
            <p>‚úÖ Connected Successfully</p>
        </div>

        <button class="close-btn" onclick="closeChatIdPopup()">CLOSE</button>
    </div>
</div>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBY4tPdcDfl0C-FRiP3L52PA2WctlziUtM",
            authDomain: "flowwebsff.firebaseapp.com",
            databaseURL: "https://flowwebsff-default-rtdb.firebaseio.com",
            projectId: "flowwebsff",
            storageBucket: "flowwebsff.firebasestorage.app",
            messagingSenderId: "693709721624",
            appId: "1:693709721624:web:e15f6cba7e97288631736d"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            document.querySelector('.sidebar-overlay').classList.toggle('active');
        }

        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            document.getElementById('page-' + pageId).classList.add('active');
            document.getElementById('nav-' + pageId).classList.add('active');
            toggleSidebar();
            window.scrollTo(0,0);
        }

        function copyWebUrl() {
            const urlText = document.getElementById("webUrl").innerText;
            navigator.clipboard.writeText(urlText).then(()=> alert("üîó URL Copied"));
        }

        // Themes Gallery Logic
        const themeUrls = [
            "https://uploads.onecompiler.io/4472wkpre/448neayv9/cc.gokou2025_01_09_18_37_39c8601794-a533-4041-a86d-40087bc982bf.jpg",
            "https://uploads.onecompiler.io/4472wkpre/44agbuxg7/eef745c62d8f0e13d0933246fca04631.jpg",
            "https://uploads.onecompiler.io/4472wkpre/448neayv9/fcd9e3a1f202b2d2cbf691b2ff093a2b.jpg",
            "https://uploads.onecompiler.io/4472wkpre/44agbuxg7/38896a152d9ef17d3d63fad1b772c4e3.jpg",
"https://uploads.onecompiler.io/4472wkpre/448neayv9/472250248_1143753157751351_3358823543604951294_n.jpeg",
    "https://uploads.onecompiler.io/4472wkpre/448neayv9/3d5d039e68d92a9ee73a9b58bd1bdc9e.jpg",
    "https://uploads.onecompiler.io/4472wkpre/448neayv9/89dd73c4171713900e4f7bcaea17ebbc.jpg",
    "https://uploads.onecompiler.io/4472wkpre/44agbuxg7/IMG_20260107_201607_341.webp",
    "https://uploads.onecompiler.io/4472wkpre/44agbuxg7/1f6981c2d0a3c4c80f2eaa6cc3b4532a.jpg",
    "https://uploads.onecompiler.io/4472wkpre/44agbuxg7/32cbe488d21368c267e3dd8d02507418.jpg",
        ];
        const btnContainer = document.getElementById("themes-buttons");
        themeUrls.forEach((url, i) => {
            const btn = document.createElement("button");
            btn.innerText = "Theme " + (i+1);
            btn.style.cssText = "background:white; border:none; padding:15px; border-radius:15px; font-weight:600; cursor:pointer;";
            btn.onclick = () => { document.getElementById("theme-fullscreen").style.display="flex"; document.getElementById("full-theme-image").src=url; };
            btnContainer.appendChild(btn);
        });

        function openThemesPopup() { document.getElementById("themes-popup").style.display="block"; }
        function closeThemesPopup() { document.getElementById("themes-popup").style.display="none"; }
        function closeFullTheme() { document.getElementById("theme-fullscreen").style.display="none"; }

        // User Data
        auth.onAuthStateChanged(user => {
            if (!user) window.location.href = "index.html";
            else {
                database.ref("users/" + user.uid).on("value", snap => {
                    if (snap.exists()) {
                        document.getElementById("userName").innerText = snap.val().username || "User";
                        document.getElementById("userEmail").innerText = snap.val().email || "Email";
                    }
                });
            }
        });

        function logoutUser() { auth.signOut().then(()=> window.location.href="index.html"); }
   
let currentUserId = null;

function openChatIdPopup() {
    document.getElementById("chatid-popup").style.display = "flex";

    if (!currentUserId) return;

    firebase.database().ref("users/" + currentUserId + "/chatId")
    .once("value", snap => {
        if (snap.exists()) {
            document.getElementById("savedChatId").innerText = snap.val();
            document.getElementById("chatid-view").style.display = "block";
            document.getElementById("chatid-form").style.display = "none";
        } else {
            document.getElementById("chatid-view").style.display = "none";
 document.getElementById("chatid-form").style.display = "block";
        }
    });
}

function closeChatIdPopup() {
    document.getElementById("chatid-popup").style.display = "none";
    document.getElementById("chatid-success").style.display = "none";
}

function saveChatId() {
    const chatId = document.getElementById("chatIdInput").value.trim();
    if (!chatId) return alert("Enter Chat ID");

    firebase.database().ref("users/" + currentUserId).update({
        chatId: chatId
    }).then(() => {
        document.getElementById("chatid-form").style.display = "none";
        document.getElementById("chatid-success").style.display = "block";

        setTimeout(() => {
            document.getElementById("savedChatId").innerText = chatId;
            document.getElementById("chatid-success").style.display = "none";
            document.getElementById("chatid-view").style.display = "block";
        }, 1200);
    });
}

function editChatId() {
    document.getElementById("chatid-form").style.display = "block";
    document.getElementById("chatid-view").style.display = "none";
    document.getElementById("chatIdInput").value =
        document.getElementById("savedChatId").innerText;
}

/* AUTH TRACK */
auth.onAuthStateChanged(user => {
    if (user) currentUserId = user.uid;
});
function openOwnerTelegram() {
    // 1. Apna Telegram Link yahan dalein
    const tgUrl = "https://t.me/FLOW_HERE"; 
    
    // 2. Browser ko batayein ki user bahar gaya hai
    localStorage.setItem('redirectedToTg', 'true');
    
    // 3. Telegram open karein
    window.open(tgUrl, '_blank');
}

// Detection Logic: Jab user wapas tab/window par aaye
window.onfocus = function() {
    if (localStorage.getItem('redirectedToTg') === 'true') {
        showTgPopup();
        localStorage.removeItem('redirectedToTg'); // Reset karein
    }
};

function showTgPopup() {
    document.getElementById('tg-profile-popup').style.display = 'flex';
}

function closeTgPopup() {
    document.getElementById('tg-profile-popup').style.display = 'none';
}
// Function to handle Bot Button Click
function handleBotRedirect() {
    const botURL = "http://t.me/FLOWxDATA_WEB_bot";
    
    // Flag set karein storage mein
    localStorage.setItem('botRedirectActive', 'true');
    
    // Bot open karein
    window.open(botURL, '_blank');
}

// Window Focus detection (Jab user Telegram se wapas aaye)
window.onfocus = function() {
    // Check if coming back from Bot
    if (localStorage.getItem('botRedirectActive') === 'true') {
        showBotPopup();
        localStorage.removeItem('botRedirectActive');
    }
    
    // Check if coming back from Owner (Existing logic)
    if (localStorage.getItem('redirectedToTg') === 'true') {
        showTgPopup();
        localStorage.removeItem('redirectedToTg');
    }
};

function showBotPopup() {
    document.getElementById('bot-data-popup').style.display = 'flex';
}

function closeBotPopup() {
    document.getElementById('bot-data-popup').style.display = 'none';
}

    </script>
</body>
</html>
